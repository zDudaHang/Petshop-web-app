{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidInput = exports.format = exports.MonthInput = exports.MonthField = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_popper_1 = require(\"react-popper\");\n\nvar createAutoCorrectedDatePipe_1 = __importDefault(require(\"text-mask-addons/dist/createAutoCorrectedDatePipe\"));\n\nvar useStyles_1 = require(\"../../styles/hooks/useStyles\");\n\nvar react_2 = require(\"../../util/react\");\n\nvar FocusManagerContainer_1 = require(\"../FocusManagerContainer\");\n\nvar MaskedTextField_1 = require(\"../MaskedTextField\");\n\nvar MonthPicker_1 = require(\"../MonthPicker\");\n\nfunction MonthField(props) {\n  var value = props.value,\n      popperProps = props.popperProps,\n      inputRef = props.inputRef,\n      onChange = props.onChange,\n      onIconClick = props.onIconClick,\n      rest = __rest(props, [\"value\", \"popperProps\", \"inputRef\", \"onChange\", \"onIconClick\"]);\n\n  var _a = useStyles_1.useStyles(createStyles),\n      classes = _a.classes,\n      css = _a.css;\n\n  var _b = react_1.useState(false),\n      open = _b[0],\n      setOpen = _b[1];\n\n  var _c = react_1.useState(),\n      anchorRef = _c[0],\n      setAnchorRef = _c[1];\n\n  var _d = react_1.useState(),\n      popperRef = _d[0],\n      setPopperRef = _d[1];\n\n  var _e = react_popper_1.usePopper(anchorRef, popperRef, __assign(__assign({}, popperProps), {\n    placement: 'bottom-start'\n  })),\n      popperStyle = _e.styles.popper,\n      placement = _e.attributes.placement;\n\n  var handlePickerChange = function (referenceMonth) {\n    setOpen(false);\n    onChange(referenceMonth);\n  };\n\n  var handleInputChange = function (e) {\n    if (e && e.target && e.target.value) {\n      var val = e.target.value;\n\n      if (exports.isValidInput(val)) {\n        onChange({\n          month: +val.substr(0, 2) - 1,\n          year: +val.substr(3)\n        });\n      }\n    } else {\n      onChange(null);\n    }\n  };\n\n  var handleInputIconClick = function () {\n    return setOpen(true);\n  };\n\n  var handleFocusIn = function () {\n    return setOpen(true);\n  };\n\n  var handleFocusOut = function () {\n    return setOpen(false);\n  };\n\n  return react_1.default.createElement(FocusManagerContainer_1.FocusManagerContainer, {\n    onFocusIn: handleFocusIn,\n    onFocusOut: handleFocusOut\n  }, react_1.default.createElement(MonthInput, __assign({\n    inputRef: react_2.composeRefs(setAnchorRef, inputRef),\n    value: exports.format(value),\n    icon: 'calendarOutline',\n    onIconClick: react_2.composeHandlers(handleInputIconClick, onIconClick),\n    onChange: handleInputChange\n  }, rest)), open && react_1.default.createElement(\"div\", {\n    ref: setPopperRef,\n    className: css(classes.popup, popperStyle),\n    \"data-placement\": placement,\n    \"data-testid\": 'MonthField.popup'\n  }, react_1.default.createElement(MonthPicker_1.MonthPicker, {\n    month: value && value.month,\n    year: value && value.year,\n    onChange: handlePickerChange\n  })));\n}\n\nexports.MonthField = MonthField;\n\nfunction MonthInput(props) {\n  return react_1.default.createElement(MaskedTextField_1.MaskedTextField, __assign({\n    mask: [/\\d/, /\\d/, '/', /\\d/, /\\d/, /\\d/, /\\d/],\n    pipe: createAutoCorrectedDatePipe_1.default('mm/yyyy'),\n    placeholder: 'mm/yyyy'\n  }, props));\n}\n\nexports.MonthInput = MonthInput;\n\nexports.format = function (value) {\n  if (!value || !value.year || value.month == null) {\n    return null;\n  }\n\n  if (value.month < 9) {\n    return \"0\" + (value.month + 1) + \"/\" + value.year;\n  } else {\n    return value.month + 1 + \"/\" + value.year;\n  }\n};\n\nexports.isValidInput = function (value) {\n  return /\\d\\d\\/\\d\\d\\d\\d/.test(value);\n};\n\nvar createStyles = function (theme) {\n  return {\n    popup: {\n      zIndex: theme.zIndex.popper\n    }\n  };\n};","map":{"version":3,"sources":["../../../src/components/MonthField/MonthField.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValidInput = exports.format = exports.MonthInput = exports.MonthField = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar createAutoCorrectedDatePipe_1 = __importDefault(require(\"text-mask-addons/dist/createAutoCorrectedDatePipe\"));\nvar useStyles_1 = require(\"../../styles/hooks/useStyles\");\nvar react_2 = require(\"../../util/react\");\nvar FocusManagerContainer_1 = require(\"../FocusManagerContainer\");\nvar MaskedTextField_1 = require(\"../MaskedTextField\");\nvar MonthPicker_1 = require(\"../MonthPicker\");\nfunction MonthField(props) {\n    var value = props.value, popperProps = props.popperProps, inputRef = props.inputRef, onChange = props.onChange, onIconClick = props.onIconClick, rest = __rest(props, [\"value\", \"popperProps\", \"inputRef\", \"onChange\", \"onIconClick\"]);\n    var _a = useStyles_1.useStyles(createStyles), classes = _a.classes, css = _a.css;\n    var _b = react_1.useState(false), open = _b[0], setOpen = _b[1];\n    var _c = react_1.useState(), anchorRef = _c[0], setAnchorRef = _c[1];\n    var _d = react_1.useState(), popperRef = _d[0], setPopperRef = _d[1];\n    var _e = react_popper_1.usePopper(anchorRef, popperRef, __assign(__assign({}, popperProps), { placement: 'bottom-start' })), popperStyle = _e.styles.popper, placement = _e.attributes.placement;\n    var handlePickerChange = function (referenceMonth) {\n        setOpen(false);\n        onChange(referenceMonth);\n    };\n    var handleInputChange = function (e) {\n        if (e && e.target && e.target.value) {\n            var val = e.target.value;\n            if (exports.isValidInput(val)) {\n                onChange({ month: +val.substr(0, 2) - 1, year: +val.substr(3) });\n            }\n        }\n        else {\n            onChange(null);\n        }\n    };\n    var handleInputIconClick = function () { return setOpen(true); };\n    var handleFocusIn = function () { return setOpen(true); };\n    var handleFocusOut = function () { return setOpen(false); };\n    return (react_1.default.createElement(FocusManagerContainer_1.FocusManagerContainer, { onFocusIn: handleFocusIn, onFocusOut: handleFocusOut },\n        react_1.default.createElement(MonthInput, __assign({ inputRef: react_2.composeRefs(setAnchorRef, inputRef), value: exports.format(value), icon: 'calendarOutline', onIconClick: react_2.composeHandlers(handleInputIconClick, onIconClick), onChange: handleInputChange }, rest)),\n        open && (react_1.default.createElement(\"div\", { ref: setPopperRef, className: css(classes.popup, popperStyle), \"data-placement\": placement, \"data-testid\": 'MonthField.popup' },\n            react_1.default.createElement(MonthPicker_1.MonthPicker, { month: value && value.month, year: value && value.year, onChange: handlePickerChange })))));\n}\nexports.MonthField = MonthField;\nfunction MonthInput(props) {\n    return (react_1.default.createElement(MaskedTextField_1.MaskedTextField, __assign({ mask: [/\\d/, /\\d/, '/', /\\d/, /\\d/, /\\d/, /\\d/], pipe: createAutoCorrectedDatePipe_1.default('mm/yyyy'), placeholder: 'mm/yyyy' }, props)));\n}\nexports.MonthInput = MonthInput;\nexports.format = function (value) {\n    if (!value || !value.year || value.month == null) {\n        return null;\n    }\n    if (value.month < 9) {\n        return \"0\" + (value.month + 1) + \"/\" + value.year;\n    }\n    else {\n        return value.month + 1 + \"/\" + value.year;\n    }\n};\nexports.isValidInput = function (value) {\n    return /\\d\\d\\/\\d\\d\\d\\d/.test(value);\n};\nvar createStyles = function (theme) { return ({\n    popup: {\n        zIndex: theme.zIndex.popper,\n    },\n}); };\n//# sourceMappingURL=MonthField.js.map"]},"metadata":{},"sourceType":"script"}