{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createStyles = exports.Dropdown = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_popper_1 = require(\"react-popper\");\n\nvar useClickOutside_1 = require(\"../../hooks/useClickOutside\");\n\nvar styles_1 = require(\"../../styles\");\n\nvar string_1 = require(\"../../util/string\");\n\nvar Portal_1 = require(\"../Portal\");\n\nvar DropdownMenu_1 = require(\"./DropdownMenu\");\n\nfunction Dropdown(props) {\n  var children = props.children,\n      anchorRef = props.anchorRef,\n      popperProps = props.popperProps,\n      open = props.open,\n      onClose = props.onClose,\n      autoclose = props.autoclose,\n      style = props.style,\n      rest = __rest(props, [\"children\", \"anchorRef\", \"popperProps\", \"open\", \"onClose\", \"autoclose\", \"style\"]);\n\n  var classes = styles_1.useStyles(exports.createStyles).classes;\n\n  var _a = react_1.useState(),\n      menuRef = _a[0],\n      setMenuRef = _a[1];\n\n  var _b = react_popper_1.usePopper(anchorRef, menuRef, popperProps),\n      popperStyle = _b.styles.popper,\n      placement = _b.attributes.placement;\n\n  var dropdownIdRef = react_1.default.useRef(\"dropdown-\" + string_1.randomStr()); // Attaches aria attributes to anchor element\n\n  react_1.useEffect(function () {\n    if (anchorRef) {\n      anchorRef.setAttribute('aria-haspopup', 'true');\n\n      if (open) {\n        anchorRef.setAttribute('aria-expanded', 'true');\n        anchorRef.setAttribute('aria-controls', dropdownIdRef.current);\n      } else {\n        anchorRef.removeAttribute('aria-expanded');\n        anchorRef.removeAttribute('aria-controls');\n      }\n    }\n  }, [open, anchorRef]); // Attaches Escape key event\n\n  react_1.useEffect(function () {\n    var handleKeyDown = function (e) {\n      if (open && e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [open, onClose]); // When opened, focus the first menu item\n\n  var isFirstRender = react_1.useRef(true);\n  react_1.useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (open) {\n      setTimeout(function () {\n        // Delay focus to preserve window scroll position\n        if (menuRef) {\n          var firstItem = menuRef.querySelector('[role=\"menuitem\"]:not([aria-disabled=\"true\"])');\n\n          if (firstItem) {\n            firstItem.focus();\n          }\n        }\n      });\n    }\n  }, [open, menuRef]); // Call onClose if target focus is outside menu\n\n  var handleBlur = react_1.useCallback(function () {\n    setTimeout(function () {\n      if (menuRef) {\n        var currentFocus = menuRef.ownerDocument.activeElement;\n\n        if (!menuRef.contains(currentFocus)) {\n          onClose();\n        }\n      }\n    });\n  }, [onClose, menuRef]); // Call `onClose` when clicked outside dropdown and anchor\n\n  useClickOutside_1.useClickOutside([anchorRef, menuRef], function () {\n    if (open) {\n      onClose();\n    }\n  });\n  var handleMenuClick = react_1.useCallback(function () {\n    if (autoclose) {\n      onClose();\n    }\n  }, [autoclose, onClose]);\n  return open && react_1.default.createElement(Portal_1.Portal, null, react_1.default.createElement(DropdownMenu_1.DropdownMenu, __assign({\n    id: dropdownIdRef.current,\n    innerRef: setMenuRef,\n    style: [popperStyle, classes.dropdown, style],\n    \"data-placement\": placement,\n    onClick: handleMenuClick,\n    onBlur: handleBlur\n  }, rest), children));\n}\n\nexports.Dropdown = Dropdown;\nDropdown.defaultProps = {\n  autoclose: true,\n  onClose: function () {\n    return null;\n  }\n};\n\nexports.createStyles = function (theme) {\n  return {\n    dropdown: {\n      zIndex: theme.zIndex.dropdown\n    }\n  };\n};","map":{"version":3,"sources":["../../../src/components/Dropdown/Dropdown.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createStyles = exports.Dropdown = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar useClickOutside_1 = require(\"../../hooks/useClickOutside\");\nvar styles_1 = require(\"../../styles\");\nvar string_1 = require(\"../../util/string\");\nvar Portal_1 = require(\"../Portal\");\nvar DropdownMenu_1 = require(\"./DropdownMenu\");\nfunction Dropdown(props) {\n    var children = props.children, anchorRef = props.anchorRef, popperProps = props.popperProps, open = props.open, onClose = props.onClose, autoclose = props.autoclose, style = props.style, rest = __rest(props, [\"children\", \"anchorRef\", \"popperProps\", \"open\", \"onClose\", \"autoclose\", \"style\"]);\n    var classes = styles_1.useStyles(exports.createStyles).classes;\n    var _a = react_1.useState(), menuRef = _a[0], setMenuRef = _a[1];\n    var _b = react_popper_1.usePopper(anchorRef, menuRef, popperProps), popperStyle = _b.styles.popper, placement = _b.attributes.placement;\n    var dropdownIdRef = react_1.default.useRef(\"dropdown-\" + string_1.randomStr());\n    // Attaches aria attributes to anchor element\n    react_1.useEffect(function () {\n        if (anchorRef) {\n            anchorRef.setAttribute('aria-haspopup', 'true');\n            if (open) {\n                anchorRef.setAttribute('aria-expanded', 'true');\n                anchorRef.setAttribute('aria-controls', dropdownIdRef.current);\n            }\n            else {\n                anchorRef.removeAttribute('aria-expanded');\n                anchorRef.removeAttribute('aria-controls');\n            }\n        }\n    }, [open, anchorRef]);\n    // Attaches Escape key event\n    react_1.useEffect(function () {\n        var handleKeyDown = function (e) {\n            if (open && e.key === 'Escape') {\n                onClose();\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return function () { return document.removeEventListener('keydown', handleKeyDown); };\n    }, [open, onClose]);\n    // When opened, focus the first menu item\n    var isFirstRender = react_1.useRef(true);\n    react_1.useEffect(function () {\n        if (isFirstRender.current) {\n            isFirstRender.current = false;\n            return;\n        }\n        if (open) {\n            setTimeout(function () {\n                // Delay focus to preserve window scroll position\n                if (menuRef) {\n                    var firstItem = menuRef.querySelector('[role=\"menuitem\"]:not([aria-disabled=\"true\"])');\n                    if (firstItem) {\n                        firstItem.focus();\n                    }\n                }\n            });\n        }\n    }, [open, menuRef]);\n    // Call onClose if target focus is outside menu\n    var handleBlur = react_1.useCallback(function () {\n        setTimeout(function () {\n            if (menuRef) {\n                var currentFocus = menuRef.ownerDocument.activeElement;\n                if (!menuRef.contains(currentFocus)) {\n                    onClose();\n                }\n            }\n        });\n    }, [onClose, menuRef]);\n    // Call `onClose` when clicked outside dropdown and anchor\n    useClickOutside_1.useClickOutside([anchorRef, menuRef], function () {\n        if (open) {\n            onClose();\n        }\n    });\n    var handleMenuClick = react_1.useCallback(function () {\n        if (autoclose) {\n            onClose();\n        }\n    }, [autoclose, onClose]);\n    return (open && (react_1.default.createElement(Portal_1.Portal, null,\n        react_1.default.createElement(DropdownMenu_1.DropdownMenu, __assign({ id: dropdownIdRef.current, innerRef: setMenuRef, style: [popperStyle, classes.dropdown, style], \"data-placement\": placement, onClick: handleMenuClick, onBlur: handleBlur }, rest), children))));\n}\nexports.Dropdown = Dropdown;\nDropdown.defaultProps = {\n    autoclose: true,\n    onClose: function () { return null; },\n};\nexports.createStyles = function (theme) { return ({\n    dropdown: {\n        zIndex: theme.zIndex.dropdown,\n    },\n}); };\n//# sourceMappingURL=Dropdown.js.map"]},"metadata":{},"sourceType":"script"}