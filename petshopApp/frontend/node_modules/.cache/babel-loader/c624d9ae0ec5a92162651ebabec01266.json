{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectDownshift = exports.defaultSelectFilter = void 0;\n\nvar downshift_1 = __importDefault(require(\"downshift\"));\n\nvar match_sorter_1 = __importDefault(require(\"match-sorter\"));\n\nvar react_1 = __importStar(require(\"react\"));\n/**\n * Default filter prop used by the Select component.\n */\n\n\nfunction defaultSelectFilter(items, filter, itemToString) {\n  return match_sorter_1.default(items, filter, {\n    keys: [itemToString]\n  });\n}\n\nexports.defaultSelectFilter = defaultSelectFilter;\n/**\n * Downshift extension with item and filter management.\n */\n\nfunction SelectDownshift(props) {\n  var items = props.items,\n      onFilterChange = props.onFilterChange,\n      children = props.children,\n      createNewItem = props.createNewItem,\n      openOnFocus = props.openOnFocus,\n      keepFilterAfterSelect = props.keepFilterAfterSelect,\n      rest = __rest(props, [\"items\", \"onFilterChange\", \"children\", \"createNewItem\", \"openOnFocus\", \"keepFilterAfterSelect\"]);\n\n  var stateReducer = react_1.useMemo(function () {\n    return createReducer(props);\n  }, [props]);\n\n  var _a = react_1.useState(items),\n      visibleItems = _a[0],\n      setVisibleItems = _a[1];\n\n  react_1.useEffect(function () {\n    setVisibleItems(props.items);\n  }, [props.items]);\n\n  var handleStateChange = function (changes, downshift) {\n    if (createNewItem && changes.hasOwnProperty('inputValue') && changes.type === downshift_1.default.stateChangeTypes.changeInput) {\n      rest.onChange && rest.onChange(createNewItem(changes.inputValue), getStateAndHelpers(downshift));\n    }\n\n    if (changes.type === downshift_1.default.stateChangeTypes.changeInput && changes.inputValue === '') {\n      rest.onChange && rest.onChange(null, getStateAndHelpers(downshift));\n    }\n\n    if (changes.isOpen) {\n      onFilterChange(null, getStateAndHelpers(downshift));\n    }\n\n    if (changes.type === downshift_1.default.stateChangeTypes.changeInput) {\n      onFilterChange(changes.inputValue, getStateAndHelpers(downshift));\n    }\n\n    if (!keepFilterAfterSelect && (changes.type === downshift_1.default.stateChangeTypes.clickItem || changes.type === downshift_1.default.stateChangeTypes.keyDownEnter)) {\n      onFilterChange(null, getStateAndHelpers(downshift));\n    }\n\n    props.onStateChange && props.onStateChange(changes, getStateAndHelpers(downshift));\n  };\n\n  var handleChange = function (item, downshift) {\n    props.onChange && props.onChange(item, getStateAndHelpers(downshift));\n  };\n\n  var createGetInputProps = function (getInputProps) {\n    return function (options) {\n      var _a = getInputProps(options),\n          autoComplete = _a.autoComplete,\n          rest = __rest(_a, [\"autoComplete\"]);\n\n      return rest;\n    };\n  };\n\n  var getStateAndHelpers = function (downshift) {\n    return __assign(__assign({}, downshift), {\n      items: items,\n      visibleItems: visibleItems,\n      setVisibleItems: setVisibleItems,\n      getInputProps: createGetInputProps(downshift.getInputProps)\n    });\n  };\n\n  return react_1.default.createElement(downshift_1.default, __assign({}, rest, {\n    stateReducer: stateReducer,\n    onStateChange: handleStateChange,\n    onChange: handleChange\n  }), function (downshift) {\n    return children(getStateAndHelpers(downshift));\n  });\n}\n\nexports.SelectDownshift = SelectDownshift;\nSelectDownshift.defaultProps = {\n  onFilterChange: function (filter, downshift) {\n    var setVisibleItems = downshift.setVisibleItems,\n        items = downshift.items,\n        itemToString = downshift.itemToString;\n    setVisibleItems(defaultSelectFilter(items, filter, itemToString));\n  }\n};\n\nfunction createReducer(props) {\n  var _a = props.openOnFocus,\n      openOnFocus = _a === void 0 ? props.createNewItem ? false : undefined : _a,\n      stateReducer = props.stateReducer;\n  return function (state, changes) {\n    if (openOnFocus === false && changes.type === undefined && !state.isOpen && changes.isOpen) {\n      return __assign(__assign({}, changes), {\n        isOpen: false\n      });\n    }\n\n    return stateReducer ? stateReducer(state, changes) : changes;\n  };\n}","map":{"version":3,"sources":["../../../../src/components/Select/SelectSingle/SelectDownshift.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectDownshift = exports.defaultSelectFilter = void 0;\nvar downshift_1 = __importDefault(require(\"downshift\"));\nvar match_sorter_1 = __importDefault(require(\"match-sorter\"));\nvar react_1 = __importStar(require(\"react\"));\n/**\n * Default filter prop used by the Select component.\n */\nfunction defaultSelectFilter(items, filter, itemToString) {\n    return match_sorter_1.default(items, filter, { keys: [itemToString] });\n}\nexports.defaultSelectFilter = defaultSelectFilter;\n/**\n * Downshift extension with item and filter management.\n */\nfunction SelectDownshift(props) {\n    var items = props.items, onFilterChange = props.onFilterChange, children = props.children, createNewItem = props.createNewItem, openOnFocus = props.openOnFocus, keepFilterAfterSelect = props.keepFilterAfterSelect, rest = __rest(props, [\"items\", \"onFilterChange\", \"children\", \"createNewItem\", \"openOnFocus\", \"keepFilterAfterSelect\"]);\n    var stateReducer = react_1.useMemo(function () { return createReducer(props); }, [props]);\n    var _a = react_1.useState(items), visibleItems = _a[0], setVisibleItems = _a[1];\n    react_1.useEffect(function () {\n        setVisibleItems(props.items);\n    }, [props.items]);\n    var handleStateChange = function (changes, downshift) {\n        if (createNewItem &&\n            changes.hasOwnProperty('inputValue') &&\n            changes.type === downshift_1.default.stateChangeTypes.changeInput) {\n            rest.onChange && rest.onChange(createNewItem(changes.inputValue), getStateAndHelpers(downshift));\n        }\n        if (changes.type === downshift_1.default.stateChangeTypes.changeInput && changes.inputValue === '') {\n            rest.onChange && rest.onChange(null, getStateAndHelpers(downshift));\n        }\n        if (changes.isOpen) {\n            onFilterChange(null, getStateAndHelpers(downshift));\n        }\n        if (changes.type === downshift_1.default.stateChangeTypes.changeInput) {\n            onFilterChange(changes.inputValue, getStateAndHelpers(downshift));\n        }\n        if (!keepFilterAfterSelect &&\n            (changes.type === downshift_1.default.stateChangeTypes.clickItem ||\n                changes.type === downshift_1.default.stateChangeTypes.keyDownEnter)) {\n            onFilterChange(null, getStateAndHelpers(downshift));\n        }\n        props.onStateChange && props.onStateChange(changes, getStateAndHelpers(downshift));\n    };\n    var handleChange = function (item, downshift) {\n        props.onChange && props.onChange(item, getStateAndHelpers(downshift));\n    };\n    var createGetInputProps = function (getInputProps) { return function (options) {\n        var _a = getInputProps(options), autoComplete = _a.autoComplete, rest = __rest(_a, [\"autoComplete\"]);\n        return rest;\n    }; };\n    var getStateAndHelpers = function (downshift) { return (__assign(__assign({}, downshift), { items: items,\n        visibleItems: visibleItems,\n        setVisibleItems: setVisibleItems, getInputProps: createGetInputProps(downshift.getInputProps) })); };\n    return (react_1.default.createElement(downshift_1.default, __assign({}, rest, { stateReducer: stateReducer, onStateChange: handleStateChange, onChange: handleChange }), function (downshift) { return children(getStateAndHelpers(downshift)); }));\n}\nexports.SelectDownshift = SelectDownshift;\nSelectDownshift.defaultProps = {\n    onFilterChange: function (filter, downshift) {\n        var setVisibleItems = downshift.setVisibleItems, items = downshift.items, itemToString = downshift.itemToString;\n        setVisibleItems(defaultSelectFilter(items, filter, itemToString));\n    },\n};\nfunction createReducer(props) {\n    var _a = props.openOnFocus, openOnFocus = _a === void 0 ? props.createNewItem ? false : undefined : _a, stateReducer = props.stateReducer;\n    return function (state, changes) {\n        if (openOnFocus === false && changes.type === undefined && !state.isOpen && changes.isOpen) {\n            return __assign(__assign({}, changes), { isOpen: false });\n        }\n        return stateReducer ? stateReducer(state, changes) : changes;\n    };\n}\n//# sourceMappingURL=SelectDownshift.js.map"]},"metadata":{},"sourceType":"script"}