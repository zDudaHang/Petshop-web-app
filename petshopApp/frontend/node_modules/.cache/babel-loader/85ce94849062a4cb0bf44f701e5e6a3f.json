{"ast":null,"code":"\"use strict\"; // https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_roving_tabindex\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useRovingTabIndex = void 0;\n\nvar react_1 = require(\"react\");\n\nvar util_1 = require(\"../util\");\n\nvar defaultOptions = {\n  initialIndex: 0,\n  nextKeys: ['ArrowDown', 'ArrowRight'],\n  prevKeys: ['ArrowUp', 'ArrowLeft'],\n  firstKeys: ['Home'],\n  lastKeys: ['End'],\n  wrapAround: false\n};\n\nfunction useRovingTabIndex(options) {\n  var _a = util_1.merge({}, defaultOptions, options),\n      initialIndex = _a.initialIndex,\n      nextKeys = _a.nextKeys,\n      prevKeys = _a.prevKeys,\n      firstKeys = _a.firstKeys,\n      lastKeys = _a.lastKeys,\n      getItems = _a.getItems,\n      wrapAround = _a.wrapAround;\n\n  var rootRef = react_1.useRef(); // Initialize tabindex attributes:\n\n  react_1.useEffect(function () {\n    var items = getItems(rootRef.current);\n    items.forEach(function (item, idx) {\n      if (idx === initialIndex) {\n        item.setAttribute('tabindex', '0');\n      } else {\n        item.setAttribute('tabindex', '-1');\n      }\n    });\n  }, [initialIndex]); // Manage child items focus event:\n\n  react_1.useEffect(function () {\n    var items = getItems(rootRef.current);\n\n    var handleChildFocus = function (event) {\n      items.forEach(function (item) {\n        return item.setAttribute('tabindex', '-1');\n      });\n      var target = event.currentTarget;\n      target.setAttribute('tabindex', '0');\n    };\n\n    items.forEach(function (item) {\n      return item.addEventListener('focus', handleChildFocus);\n    });\n    return function () {\n      return items.forEach(function (item) {\n        return item.removeEventListener('focus', handleChildFocus);\n      });\n    };\n  }, [options]); // Manage keydown event on root ref:\n\n  react_1.useEffect(function () {\n    var getTargetIndex = function (items, key) {\n      var activeElement = document.activeElement;\n      var activeIndex = items.indexOf(activeElement);\n\n      if (nextKeys.includes(key)) {\n        return activeIndex < items.length - 1 ? activeIndex + 1 : wrapAround ? 0 : null;\n      }\n\n      if (prevKeys.includes(key)) {\n        return activeIndex > 0 ? activeIndex - 1 : wrapAround ? items.length - 1 : null;\n      }\n\n      if (firstKeys.includes(key)) {\n        return 0;\n      }\n\n      if (lastKeys.includes(key)) {\n        return items.length - 1;\n      }\n\n      return null;\n    };\n\n    var handleKeyDown = function (event) {\n      if (__spreadArrays(nextKeys, prevKeys, firstKeys, lastKeys).includes(event.key)) {\n        var items = getItems(rootRef.current);\n        var targetIndex = getTargetIndex(items, event.key);\n        var target = items[targetIndex];\n\n        if (target) {\n          target.focus();\n        }\n\n        event.preventDefault();\n      }\n    };\n\n    rootRef.current.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return rootRef.current.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [options]);\n  return rootRef;\n}\n\nexports.useRovingTabIndex = useRovingTabIndex;","map":{"version":3,"sources":["../../src/hooks/useRovingTabIndex.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_roving_tabindex\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useRovingTabIndex = void 0;\nvar react_1 = require(\"react\");\nvar util_1 = require(\"../util\");\nvar defaultOptions = {\n    initialIndex: 0,\n    nextKeys: ['ArrowDown', 'ArrowRight'],\n    prevKeys: ['ArrowUp', 'ArrowLeft'],\n    firstKeys: ['Home'],\n    lastKeys: ['End'],\n    wrapAround: false,\n};\nfunction useRovingTabIndex(options) {\n    var _a = util_1.merge({}, defaultOptions, options), initialIndex = _a.initialIndex, nextKeys = _a.nextKeys, prevKeys = _a.prevKeys, firstKeys = _a.firstKeys, lastKeys = _a.lastKeys, getItems = _a.getItems, wrapAround = _a.wrapAround;\n    var rootRef = react_1.useRef();\n    // Initialize tabindex attributes:\n    react_1.useEffect(function () {\n        var items = getItems(rootRef.current);\n        items.forEach(function (item, idx) {\n            if (idx === initialIndex) {\n                item.setAttribute('tabindex', '0');\n            }\n            else {\n                item.setAttribute('tabindex', '-1');\n            }\n        });\n    }, [initialIndex]);\n    // Manage child items focus event:\n    react_1.useEffect(function () {\n        var items = getItems(rootRef.current);\n        var handleChildFocus = function (event) {\n            items.forEach(function (item) { return item.setAttribute('tabindex', '-1'); });\n            var target = event.currentTarget;\n            target.setAttribute('tabindex', '0');\n        };\n        items.forEach(function (item) { return item.addEventListener('focus', handleChildFocus); });\n        return function () { return items.forEach(function (item) { return item.removeEventListener('focus', handleChildFocus); }); };\n    }, [options]);\n    // Manage keydown event on root ref:\n    react_1.useEffect(function () {\n        var getTargetIndex = function (items, key) {\n            var activeElement = document.activeElement;\n            var activeIndex = items.indexOf(activeElement);\n            if (nextKeys.includes(key)) {\n                return activeIndex < items.length - 1 ? activeIndex + 1 : wrapAround ? 0 : null;\n            }\n            if (prevKeys.includes(key)) {\n                return activeIndex > 0 ? activeIndex - 1 : wrapAround ? items.length - 1 : null;\n            }\n            if (firstKeys.includes(key)) {\n                return 0;\n            }\n            if (lastKeys.includes(key)) {\n                return items.length - 1;\n            }\n            return null;\n        };\n        var handleKeyDown = function (event) {\n            if (__spreadArrays(nextKeys, prevKeys, firstKeys, lastKeys).includes(event.key)) {\n                var items = getItems(rootRef.current);\n                var targetIndex = getTargetIndex(items, event.key);\n                var target = items[targetIndex];\n                if (target) {\n                    target.focus();\n                }\n                event.preventDefault();\n            }\n        };\n        rootRef.current.addEventListener('keydown', handleKeyDown);\n        return function () { return rootRef.current.removeEventListener('keydown', handleKeyDown); };\n    }, [options]);\n    return rootRef;\n}\nexports.useRovingTabIndex = useRovingTabIndex;\n//# sourceMappingURL=useRovingTabIndex.js.map"]},"metadata":{},"sourceType":"script"}