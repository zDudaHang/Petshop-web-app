{"ast":null,"code":"\"use strict\"; // From downshift examples\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiDownshift = void 0;\n\nvar downshift_1 = __importDefault(require(\"downshift\"));\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar util_1 = require(\"../../../util\");\n\nvar SelectDownshift_1 = require(\"../SelectSingle/SelectDownshift\");\n\nfunction MultiDownshift(props) {\n  var downshiftRef = react_1.useRef();\n\n  var _a = react_1.useState(props.selectedItems),\n      selectedItems = _a[0],\n      setSelectedItems = _a[1];\n\n  var _b = react_1.useState(false),\n      changed = _b[0],\n      setChanged = _b[1];\n\n  react_1.useEffect(function () {\n    setSelectedItems(props.selectedItems);\n  }, [props.selectedItems]);\n  react_1.useEffect(function () {\n    if (downshiftRef.current && changed) {\n      props.onChange && props.onChange(selectedItems, getStateAndHelpers(downshiftRef.current));\n      props.onSelect && props.onSelect(selectedItems, getStateAndHelpers(downshiftRef.current));\n      setChanged(false);\n    }\n  }, [selectedItems]);\n\n  var isSelected = function (item) {\n    return util_1.some(selectedItems, function (i) {\n      return props.itemIsEqual(i, item);\n    });\n  };\n\n  var handleChange = function (selectedItem) {\n    if (selectedItem) {\n      if (isSelected(selectedItem)) {\n        removeItem(selectedItem);\n      } else {\n        addItem(selectedItem);\n      }\n    }\n  };\n\n  var removeItem = function (selectedItem) {\n    setChanged(true);\n    setSelectedItems(function (currentItems) {\n      return currentItems.filter(function (item) {\n        return !props.itemIsEqual(selectedItem, item);\n      });\n    });\n  };\n\n  var addItem = function (item) {\n    setChanged(true);\n\n    if (!isSelected(item)) {\n      setSelectedItems(function (currentItems) {\n        return __spreadArrays(currentItems, [item]);\n      });\n    }\n  };\n\n  var getStateAndHelpers = function (downshift) {\n    downshiftRef.current = downshift;\n    return __assign(__assign({}, downshift), {\n      selectedItems: selectedItems,\n      isSelected: isSelected,\n      addItem: addItem,\n      removeItem: removeItem\n    });\n  };\n\n  var children = props.children,\n      onSelect = props.onSelect,\n      rest = __rest(props // TODO: compose together props (rather than overwriting them) like downshift does\n  , [\"children\", \"onSelect\"]); // TODO: compose together props (rather than overwriting them) like downshift does\n\n\n  return react_1.default.createElement(SelectDownshift_1.SelectDownshift, __assign({}, rest, {\n    stateReducer: stateReducer,\n    onChange: handleChange,\n    selectedItem: null,\n    keepFilterAfterSelect: true\n  }), function (downshift) {\n    return children(getStateAndHelpers(downshift));\n  });\n}\n\nexports.MultiDownshift = MultiDownshift;\nMultiDownshift.defaultProps = {\n  selectedItems: [],\n  itemIsEqual: function (a, b) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('MultiDownshift: using a deep compare itemIsEqual implementation for object comparision.' + ' You should probably provide your own `itemIsEqual` implementation.');\n    }\n\n    return util_1.isEqual(a, b);\n  }\n};\n\nvar stateReducer = function (state, changes) {\n  var inputValue = changes.inputValue,\n      rest = __rest(changes, [\"inputValue\"]);\n\n  if (changes.type === undefined && state.isOpen && !changes.isOpen) {\n    // Clear inputValue when select is closed\n    return __assign(__assign({}, changes), {\n      inputValue: ''\n    });\n  }\n\n  switch (changes.type) {\n    case downshift_1.default.stateChangeTypes.changeInput:\n      return __assign(__assign({}, rest), {\n        inputValue: inputValue\n      });\n\n    case downshift_1.default.stateChangeTypes.keyDownEnter:\n    case downshift_1.default.stateChangeTypes.clickItem:\n      return __assign(__assign({}, rest), {\n        highlightedIndex: state.highlightedIndex,\n        isOpen: true\n      });\n\n    default:\n      return rest;\n  }\n};","map":{"version":3,"sources":["../../../../src/components/Select/SelectMulti/MultiDownshift.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// From downshift examples\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultiDownshift = void 0;\nvar downshift_1 = __importDefault(require(\"downshift\"));\nvar react_1 = __importStar(require(\"react\"));\nvar util_1 = require(\"../../../util\");\nvar SelectDownshift_1 = require(\"../SelectSingle/SelectDownshift\");\nfunction MultiDownshift(props) {\n    var downshiftRef = react_1.useRef();\n    var _a = react_1.useState(props.selectedItems), selectedItems = _a[0], setSelectedItems = _a[1];\n    var _b = react_1.useState(false), changed = _b[0], setChanged = _b[1];\n    react_1.useEffect(function () {\n        setSelectedItems(props.selectedItems);\n    }, [props.selectedItems]);\n    react_1.useEffect(function () {\n        if (downshiftRef.current && changed) {\n            props.onChange && props.onChange(selectedItems, getStateAndHelpers(downshiftRef.current));\n            props.onSelect && props.onSelect(selectedItems, getStateAndHelpers(downshiftRef.current));\n            setChanged(false);\n        }\n    }, [selectedItems]);\n    var isSelected = function (item) { return util_1.some(selectedItems, function (i) { return props.itemIsEqual(i, item); }); };\n    var handleChange = function (selectedItem) {\n        if (selectedItem) {\n            if (isSelected(selectedItem)) {\n                removeItem(selectedItem);\n            }\n            else {\n                addItem(selectedItem);\n            }\n        }\n    };\n    var removeItem = function (selectedItem) {\n        setChanged(true);\n        setSelectedItems(function (currentItems) { return currentItems.filter(function (item) { return !props.itemIsEqual(selectedItem, item); }); });\n    };\n    var addItem = function (item) {\n        setChanged(true);\n        if (!isSelected(item)) {\n            setSelectedItems(function (currentItems) { return __spreadArrays(currentItems, [item]); });\n        }\n    };\n    var getStateAndHelpers = function (downshift) {\n        downshiftRef.current = downshift;\n        return __assign(__assign({}, downshift), { selectedItems: selectedItems,\n            isSelected: isSelected,\n            addItem: addItem,\n            removeItem: removeItem });\n    };\n    var children = props.children, onSelect = props.onSelect, rest = __rest(props\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    , [\"children\", \"onSelect\"]);\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (react_1.default.createElement(SelectDownshift_1.SelectDownshift, __assign({}, rest, { stateReducer: stateReducer, onChange: handleChange, selectedItem: null, keepFilterAfterSelect: true }), function (downshift) { return children(getStateAndHelpers(downshift)); }));\n}\nexports.MultiDownshift = MultiDownshift;\nMultiDownshift.defaultProps = {\n    selectedItems: [],\n    itemIsEqual: function (a, b) {\n        if (process.env.NODE_ENV !== 'production') {\n            console.warn('MultiDownshift: using a deep compare itemIsEqual implementation for object comparision.' +\n                ' You should probably provide your own `itemIsEqual` implementation.');\n        }\n        return util_1.isEqual(a, b);\n    },\n};\nvar stateReducer = function (state, changes) {\n    var inputValue = changes.inputValue, rest = __rest(changes, [\"inputValue\"]);\n    if (changes.type === undefined && state.isOpen && !changes.isOpen) {\n        // Clear inputValue when select is closed\n        return __assign(__assign({}, changes), { inputValue: '' });\n    }\n    switch (changes.type) {\n        case downshift_1.default.stateChangeTypes.changeInput:\n            return __assign(__assign({}, rest), { inputValue: inputValue });\n        case downshift_1.default.stateChangeTypes.keyDownEnter:\n        case downshift_1.default.stateChangeTypes.clickItem:\n            return __assign(__assign({}, rest), { highlightedIndex: state.highlightedIndex, isOpen: true });\n        default:\n            return rest;\n    }\n};\n//# sourceMappingURL=MultiDownshift.js.map"]},"metadata":{},"sourceType":"script"}